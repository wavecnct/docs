import { Callout } from "nextra/components";

# Microsoft Intra ID Integration

## Create a new application in Azure

1. To create a new application in Azure, go to **Identity > Application > Enterprise Application > New Application**
2. Click on **Create your own application.** Next, enter the name of the application (e.g. Wave Connect) and choose _"Integrate any other application you don't find in the gallery"._
   <br />

![Create your own application](/create-app.png)

3. Now click on the **Single Sign-On tab** and click **SAML**. The form below should appear.
   <br />

![SSO Form](/sso-form.png)

4. Enter the **Identifier (Entity ID)** (e.g. wave-connect)
   <br />

![indentifier(entity id)](/entity-id-map.png)

5. Add <span background-color="#EFEFEF">https://app.wabecnct.com/__/auth/handler</span> for the Reply URL.
   <Callout type="info">
   **Note**: Currently, only service-provider (SP) initiated SAML is available.
   </Callout>
   <br />![reply-url](/reply-url.png)

6. **Recommended**: In the Attributes & Claims section, change the Unique User Identifier to email address.

![attributes & Claims](/attributes-claims.png)

<br /><br />

![manage_claims](/manage-claims.png)

<Callout type="info"> 
   **Note**: Don't forget to assign users and /or groups to the application.
</Callout>


## Configure SAML on Wave for Teams

1. Open <a href="https://teams.wavecnct.com/"> Wave for teams</a> and go to the Organization Settings. Now, open _Configure SAML_ form.
   <br />

![Configure_SAML_Form](/configure-saml-form.png)

2. Entity ID maps to Azure AD Identifier.
   <br />

![Entity_ID](/entity-id.png)<br />

3. SSO URL maps to Azure Login URL.
   <br />

![SSO_URL](/entity-id.png)<br />

4. x509 Certificate maps to Azuer Certificate (Base64).
   <br />

![x509_Certificate](/x509-certificate.png)<br />

5. Service Provider Entity ID maps to Azure _Identifier (Entity ID)_.
   <br />

![Service_Provider_Entity_ID](/sp-entity-id.png)<br />

## How to Sign in With SSO

How SSO works:

1.  The user can use either of these methods:<br /><br />
   A.   Member attempt to log in to Wave Connect (Wave) by entering his/her email address.<br />
   B.   The user attempts to login by clicking on the SSO button and entering the organization username (this can be found and configured under your organization settings on Teams by Wave Connect).<br /><br />
      <img src="/org-username.png" alt="Organization Username" /><br />
2.  Wave sends a request to the identity provider.
3.  The identity provider checks this member's credentials.
4.  The identity provider sends a response to Wave to verify the member's identity.
5.  Wave accepts the response and logs the member into their Wave account.<br /><br />

<Callout type="info">
   **Note**: Email aliases do not work with SAML SSO.
</Callout>
